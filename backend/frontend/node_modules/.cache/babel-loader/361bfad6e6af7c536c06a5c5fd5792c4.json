{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive\\\\Desktop\\\\new_folder\\\\backend\\\\frontend\\\\src\\\\component\\\\User\\\\UpdateProfile.jsx\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport \"./UpdateProfile.css\";\nimport Loader from \"../layout/Loader/Loader\";\nimport EmailIcon from \"@mui/icons-material/Email\";\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { clearErrors, loadUser, updateProfile } from \"../../actions/UserAction\";\nimport { useAlert } from \"react-alert\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UPDATE_PROFILE_RESET } from \"../../constants/userConstants\";\nimport MetaData from \"../layout/MetaData\";\nconst UpdateProfile = () => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n  const history = useNavigate();\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    error,\n    isUpdated,\n    loading\n  } = useSelector(state => state.profile);\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [avatar, setAvatar] = useState();\n  const [avatarPreview, setAvatarPreview] = useState(\"/ProfileImg.png\");\n  const updateProfileSubmit = e => {\n    e.preventDefault();\n    const myForm = new FormData();\n    myForm.set(\"name\", name);\n    myForm.set(\"email\", email);\n    myForm.set(\"avatar\", avatar);\n    dispatch(updateProfile(myForm));\n  };\n  const updateProfileDataChange = e => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      if (reader.readyState === 2) {\n        setAvatarPreview(reader.result);\n        setAvatar(reader.result);\n      }\n    };\n    reader.readAsDataURL(e.target.files[0]);\n  };\n  useEffect(() => {\n    if (user) {\n      setName(user.name);\n      setEmail(user.email);\n      setAvatarPreview(user.avatar.url);\n    }\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n    if (isUpdated) {\n      alert.success(\"Profile Updated Successfully\");\n      dispatch(loadUser());\n      history(\"/account\");\n      dispatch({\n        type: UPDATE_PROFILE_RESET\n      });\n    }\n  }, [dispatch, error, alert, history, isUpdated, user]);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MetaData, {\n    title: \"Update Profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"updateProfileContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"updateProfileBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"updateProfileHeading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, \"Update Profile\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"updateProfileForm\",\n    encType: \"multipart/form-data\",\n    onSubmit: updateProfileSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"updateProfileName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AccountCircleIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Name\",\n    required: true,\n    name: \"name\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"updateProfileEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(EmailIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    placeholder: \"Email\",\n    required: true,\n    name: \"email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"updateProfileImage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: avatarPreview,\n    alt: \"Avatar Preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"avatar\",\n    accept: \"image/*\",\n    onChange: updateProfileDataChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Update\",\n    className: \"updateProfileBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }))))));\n};\nexport default UpdateProfile;","map":{"version":3,"names":["React","Fragment","useState","useEffect","Loader","EmailIcon","AccountCircleIcon","useDispatch","useSelector","clearErrors","loadUser","updateProfile","useAlert","useNavigate","UPDATE_PROFILE_RESET","MetaData","UpdateProfile","dispatch","alert","history","user","state","error","isUpdated","loading","profile","name","setName","email","setEmail","avatar","setAvatar","avatarPreview","setAvatarPreview","updateProfileSubmit","e","preventDefault","myForm","FormData","set","updateProfileDataChange","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","url","success","type","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","className","encType","onSubmit","placeholder","required","value","onChange","id","src","alt","accept"],"sources":["C:/Users/Dell/OneDrive/Desktop/new_folder/backend/frontend/src/component/User/UpdateProfile.jsx"],"sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport \"./UpdateProfile.css\";\nimport Loader from \"../layout/Loader/Loader\";\nimport EmailIcon from \"@mui/icons-material/Email\";\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { clearErrors, loadUser, updateProfile } from \"../../actions/UserAction\";\nimport { useAlert } from \"react-alert\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UPDATE_PROFILE_RESET } from \"../../constants/userConstants\";\nimport MetaData from \"../layout/MetaData\";\n\nconst UpdateProfile = () => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n  const history = useNavigate();\n\n  const { user } = useSelector((state) => state.user);\n  const { error, isUpdated, loading } = useSelector((state) => state.profile);\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [avatar, setAvatar] = useState();\n  const [avatarPreview, setAvatarPreview] = useState(\"/ProfileImg.png\");\n\n  const updateProfileSubmit = (e) => {\n    e.preventDefault();\n\n    const myForm = new FormData();\n    myForm.set(\"name\", name);\n    myForm.set(\"email\", email);\n    myForm.set(\"avatar\", avatar);\n    dispatch(updateProfile(myForm));\n  };\n\n  const updateProfileDataChange = (e) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      if (reader.readyState === 2) {\n        setAvatarPreview(reader.result);\n        setAvatar(reader.result);\n      }\n    };\n    reader.readAsDataURL(e.target.files[0]);\n  };\n\n  useEffect(() => {\n    if (user) {\n      setName(user.name);\n      setEmail(user.email);\n      setAvatarPreview(user.avatar.url);\n    }\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n    if (isUpdated) {\n      alert.success(\"Profile Updated Successfully\");\n      dispatch(loadUser());\n      history(\"/account\");\n      dispatch({ type: UPDATE_PROFILE_RESET });\n    }\n  }, [dispatch, error, alert, history, isUpdated, user]);\n\n  return (\n    <Fragment>\n      {loading ? (\n        <Loader />\n      ) : (\n        <Fragment>\n          <MetaData title=\"Update Profile\" />\n          <div className=\"updateProfileContainer\">\n            <div className=\"updateProfileBox\">\n              <h2 className=\"updateProfileHeading\">Update Profile</h2>\n\n              <form\n                className=\"updateProfileForm\"\n                encType=\"multipart/form-data\"\n                onSubmit={updateProfileSubmit}\n              >\n                <div className=\"updateProfileName\">\n                  <AccountCircleIcon />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Name\"\n                    required\n                    name=\"name\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                  />\n                </div>\n                <div className=\"updateProfileEmail\">\n                  <EmailIcon />\n                  <input\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    required\n                    name=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n                </div>\n\n                <div id=\"updateProfileImage\">\n                  <img src={avatarPreview} alt=\"Avatar Preview\" />\n                  <input\n                    type=\"file\"\n                    name=\"avatar\"\n                    accept=\"image/*\"\n                    onChange={updateProfileDataChange}\n                  />\n                </div>\n                <input\n                  type=\"submit\"\n                  value=\"Update\"\n                  className=\"updateProfileBtn\"\n                />\n              </form>\n            </div>\n          </div>\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport default UpdateProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}